# TASK 4: SYSTEM STATUS UI - –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ò–ï

–î–∞—Ç–∞: 27 –Ω–æ—è–±—Ä—è 2025 –≥.
–°—Ç–∞—Ç—É—Å: **–ó–ê–í–ï–†–®–ï–ù–û –ù–ê 100%**

---

## üì¶ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### 1. `client/src/lib/components/SystemStatusPanel.svelte` (333 —Å—Ç—Ä–æ–∫–∏)

**–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–∏—Å–æ–≤**

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: `ServiceInfo`, `ServiceStatus`
- –§—É–Ω–∫—Ü–∏—è `refreshStatus()` —Å –≤—ã–∑–æ–≤–æ–º `invoke('get_system_status')`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `ApiResponse<T>` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–∑ Core Bridge
- –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤: `unknown`, `checking`, `up`, `down`
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `setInterval` (–∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥)
- Lifecycle hooks: `onMount` (–∑–∞–ø—É—Å–∫) + `onDestroy` (cleanup)

**UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ Ollama –∏ CORTEX
- Badges —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:
  - üü¢ –†–∞–±–æ—Ç–∞–µ—Ç (green)
  - üî¥ –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (red)
  - üü° –ü—Ä–æ–≤–µ—Ä–∫–∞... (orange, pulse animation)
  - ‚ö™ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ (gray)
- –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –∫–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å" + lastCheck timestamp
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –º–∏–≥–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
- Error box (–∫—Ä–∞—Å–Ω—ã–π) –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö invoke()
- –°–µ–∫—Ü–∏—è "–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç" —Å 4 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

**CSS:**
- Scoped styles —Å hover —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π grid layout
- –ê–Ω–∏–º–∞—Ü–∏–∏: pulse, blink, fade-in
- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (background #1a1a1a)

---

### 2. `client/test_task4_scenarios.ps1` (200+ —Å—Ç—Ä–æ–∫)

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–∑–∞–ø—É—Å–∫)
- 3 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è:
  1. –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ UP
  2. –¢–æ–ª—å–∫–æ CORTEX DOWN
  3. –û–±–∞ DOWN
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ UI

---

## üìù –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

### 1. `client/src/routes/+page.svelte`

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è Chat ‚Üî System Status**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò–º–ø–æ—Ä—Ç `SystemStatusPanel` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `activeView: 'chat' | 'status'`
- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å (`<nav class="main-nav">`)
- –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥: `{#if activeView === 'chat'}` / `{:else if activeView === 'status'}`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏:
  - –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (background #1a1a1a, text #e0e0e0)
  - –°—Ç–∏–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–≤—ã–±—Ä–∞–Ω–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ –ø–æ–¥—Å–≤–µ—á–µ–Ω–∞ –∑–µ–ª—ë–Ω—ã–º)
  - Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö

---

## üß™ –¢–ï–°–¢–û–í–´–ï –°–¶–ï–ù–ê–†–ò–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ UP ‚úÖ

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Ollama: üü¢ –†–∞–±–æ—Ç–∞–µ—Ç
- CORTEX: üü¢ –†–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –û–±–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∑–µ–ª—ë–Ω—ã–µ badges
- ‚úÖ `lastCheck` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ `errorMessage`
- ‚úÖ UI –æ—Ç–∑—ã–≤—á–∏–≤—ã–π, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ Chat —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–æ–ª—å–∫–æ CORTEX DOWN ‚úÖ

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Ollama: üü¢ –†–∞–±–æ—Ç–∞–µ—Ç
- CORTEX: üî¥ –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ Ollama badge –∑–µ–ª—ë–Ω—ã–π, CORTEX badge –∫—Ä–∞—Å–Ω—ã–π
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –≤–∏–¥–Ω—ã –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- ‚úÖ UI –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±–∞ DOWN ‚úÖ

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Ollama: üî¥ –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- CORTEX: üî¥ –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –û–±–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫—Ä–∞—Å–Ω—ã–µ badges
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –≤–∏–¥–Ω—ã
- ‚úÖ UI –æ—Å—Ç–∞—ë—Ç—Å—è –∂–∏–≤—ã–º (graceful degradation)
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ Chat —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Error box –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏

---

## üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ù–Æ–ê–ù–°–´

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ `get_system_status`

```json
{
  "ok": true,
  "data": {
    "ollama": { 
      "status": "up", 
      "details": "6 models available" 
    },
    "cortex": { 
      "status": "up", 
      "details": "LightRAG server v1.0" 
    }
  }
}
```

### –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤

| Rust response | UI ServiceStatus | Badge |
|---------------|------------------|-------|
| `"up"` | `up` | üü¢ –†–∞–±–æ—Ç–∞–µ—Ç |
| `"down"` | `down` | üî¥ –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| `null`/`undefined` | `unknown` | ‚ö™ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ |
| –í–æ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ | `checking` | üü° –ü—Ä–æ–≤–µ—Ä–∫–∞... |

### Graceful Error Handling

1. **–ï—Å–ª–∏ `res.ok === false`:**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º `res.error.message` –≤ error box
   - –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å `down`

2. **–ï—Å–ª–∏ `throw exception`:**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
   - UI –æ—Å—Ç–∞—ë—Ç—Å—è –∂–∏–≤—ã–º (try/catch –≤ `refreshStatus`)

3. **UI —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:**
   - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - `onDestroy` cleanup –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ Chat –≤–æ–∑–º–æ–∂–Ω–æ –≤ –ª—é–±–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 333 (SystemStatusPanel) + –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ +page.svelte
- **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:** 200+ —Å—Ç—Ä–æ–∫ PowerShell
- **–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~1 —á–∞—Å
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:** 3/3 —Å—Ü–µ–Ω–∞—Ä–∏—è —É—Å–ø–µ—à–Ω–æ

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø

### ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

- [x] **Task 4.1:** –ù–∞–≤–∏–≥–∞—Ü–∏—è Chat ‚Üî System Status
- [x] **Task 4.2:** SystemStatusPanel.svelte —Å–æ–∑–¥–∞–Ω
- [x] **Task 4.3:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞
- [x] **Task 4.4:** UX –ø–æ–¥—Å–∫–∞–∑–∫–∏
- [x] **Task 4.5:** –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ + lifecycle

### ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:

- [x] `invoke('get_system_status')` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [x] `ApiResponse<T>` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `setInterval` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] `onDestroy` cleanup –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏
- [x] Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö

### ‚úÖ UX –∫–∞—á–µ—Å—Ç–≤–æ:

- [x] –ü–æ–Ω—è—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã (üü¢/üî¥/üü°/‚ö™)
- [x] –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏
- [x] –û—Ç–∑—ã–≤—á–∏–≤—ã–π UI –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π
- [x] –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- [x] –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å Chat)

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –≠–¢–ê–ü–£

**TASK 4 –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.**

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: **TASK 5: Settings (—ç–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫)**

–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ Ollama
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã CORTEX (top_k, mode)
- –ü—Ä–æ—Ñ–∏–ª–∏ –∞–≥–µ–Ω—Ç–∞ (presets –ø–æ–≤–µ—Ä—Ö —è–¥—Ä–∞)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (localStorage –∏–ª–∏ config)

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 27.11.2025  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** GitHub Copilot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **TASK 4 –ó–ê–í–ï–†–®–ï–ù–ê –ù–ê 100%**
