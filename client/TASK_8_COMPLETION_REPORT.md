# Task 8 ‚Äî Command Slot + Training UI (MVP)

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 27 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–í–µ—Ä—Å–∏—è:** 1.0 (MVP)

---

## 1. Overview

### –¶–µ–ª—å Task 8

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π DSL-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤–º–µ—Å—Ç–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ natural language input. –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞—Ç—å **Command Slot** —Å–∏—Å—Ç–µ–º—É —Å —Ç—Ä–µ–º—è —Ç–∏–ø–∞–º–∏ –∫–æ–º–∞–Ω–¥:

1. **INDEX KNOWLEDGE** ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é)
2. **TRAIN AGENT** ‚Äî –¥–æ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
3. **GIT PUSH** ‚Äî –∫–æ–º–º–∏—Ç –∏ –ø—É—à –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏

| –ü–æ–¥–∑–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| **8.1** | ‚úÖ | –ü–∞—Ä—Å–µ—Ä –∫–æ–º–∞–Ω–¥ (Rust) ‚Äî `command_parser.rs` (283 —Å—Ç—Ä–æ–∫–∏, 7 unit-—Ç–µ—Å—Ç–æ–≤) |
| **8.2** | ‚úÖ | `execute_agent_command` ‚Äî —Ä–æ—É—Ç–∏–Ω–≥ –∫–æ–º–∞–Ω–¥ + –∑–∞–≥–ª—É—à–∫–∏ TRAIN/GIT |
| **8.3** | ‚úÖ | `CommandSlot.svelte` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (500+ —Å—Ç—Ä–æ–∫) |
| **8.4** | ‚úÖ | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≥–ª–∞–≤–Ω—ã–π layout (5-—è –≤–∫–ª–∞–¥–∫–∞ üîß Commands) |
| **8.5** | ‚úÖ | Chat ‚Üí CommandSlot –º–æ—Å—Ç (store + –∫–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏) |
| **8.6** | ‚úÖ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª + TESTING_GUIDE) |

---

## 2. DSL –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### 2.1 –§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã

```
[COMMAND_TYPE]
KEY1="VALUE1"
KEY2="VALUE2"
...
```

**–ü—Ä–∞–≤–∏–ª–∞:**

1. **–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞** ‚Äî —Ç–∏–ø –∫–æ–º–∞–Ω–¥—ã (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ):
   - `INDEX KNOWLEDGE`
   - `TRAIN AGENT`
   - `GIT PUSH`

2. **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏** ‚Äî –ø–∞—Ä—ã KEY="VALUE":
   - –ö–ª—é—á ‚Äî –ª–∞—Ç–∏–Ω–∏—Ü–∞, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Äî **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –≤ –¥–≤–æ–π–Ω—ã—Ö –∫–∞–≤—ã—á–∫–∞—Ö
   - –ü—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥ `=` ‚Äî –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è (–ø–∞—Ä—Å–µ—Ä –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç)

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ö–∞–∂–¥—ã–π —Ç–∏–ø –∫–æ–º–∞–Ω–¥—ã –∏–º–µ–µ—Ç **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ** –∫–ª—é—á–∏
   - –ö–∞–∂–¥—ã–π —Ç–∏–ø –∫–æ–º–∞–Ω–¥—ã –∏–º–µ–µ—Ç **–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ** –∫–ª—é—á–∏
   - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–ª—é—á–∏ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (forward compatibility)

---

### 2.2 INDEX KNOWLEDGE

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ LightRAG (CORTEX).

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

- `PATH` ‚Äî –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (Windows/Unix)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

- `MODE` ‚Äî —Ä–µ–∂–∏–º –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:
  - `local` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - `global`
  - `hybrid`
  - `naive`
- `PROFILE` ‚Äî –∏–º—è –∞–≥–µ–Ω—Ç–∞-–ø—Ä–æ—Ñ–∏–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `triz_engineer`)

**–ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã:**

```
INDEX KNOWLEDGE
PATH="E:\WORLD_OLLAMA\library\raw_documents"
MODE="local"
PROFILE="triz_engineer"
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

- `PATH` –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- `MODE` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `PROFILE` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –ª—é–±–∞—è —Å—Ç—Ä–æ–∫–∞

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ execute_agent_command:**

- –õ–æ–≥–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É (–ø–æ–∫–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `success: true` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **TODO (–±—É–¥—É—â–µ–µ):** –í—ã–∑–æ–≤ `start_indexation` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ –∫–æ–º–∞–Ω–¥—ã

---

### 2.3 TRAIN AGENT

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–æ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ LLaMA Factory (STUB –≤ MVP).

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

- `PROFILE` ‚Äî –∏–º—è –ø—Ä–æ—Ñ–∏–ª—è –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è
- `DATA_PATH` ‚Äî –ø—É—Ç—å –∫ –¥–∞—Ç–∞—Å–µ—Ç—É –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

- `EPOCHS` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö –æ–±—É—á–µ–Ω–∏—è (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `3`)
- `MODE` ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –æ–±—É—á–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `llama_factory`)

**–ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã:**

```
TRAIN AGENT
PROFILE="triz_engineer"
DATA_PATH="E:\WORLD_OLLAMA\training_data"
EPOCHS="5"
MODE="llama_factory"
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

- `PROFILE` –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- `DATA_PATH` –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- `EPOCHS` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º > 0

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ execute_agent_command (STUB):**

- –°–æ–∑–¥–∞—ë—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç `%APPDATA%\tauri_fresh\training_status.json`:
  ```json
  {
    "state": "received",
    "profile": "triz_engineer",
    "data_path": "E:\\WORLD_OLLAMA\\training_data",
    "epochs": 5,
    "started_at": "2025-11-27T20:00:00Z",
    "last_error": null
  }
  ```
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `success: true` —Å –ø–æ–º–µ—Ç–∫–æ–π "(STUB)"
- **–ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å MVP)

**TODO (–±—É–¥—É—â–µ–µ):**

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLaMA Factory —á–µ—Ä–µ–∑ PowerShell
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è
- UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

---

### 2.4 GIT PUSH

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–º–∏—Ç –∏ –ø—É—à –≤ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (STUB –≤ MVP).

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

- `REPO_PATH` ‚Äî –ø—É—Ç—å –∫ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

- `BRANCH` ‚Äî –≤–µ—Ç–∫–∞ –¥–ª—è –ø—É—à–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `main`)
- `SUMMARY` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `Auto-commit`)

**–ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã:**

```
GIT PUSH
REPO_PATH="E:\WORLD_OLLAMA"
BRANCH="main"
SUMMARY="Task 8 completed"
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

- `REPO_PATH` –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ execute_agent_command (STUB):**

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** `REPO_PATH` –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `E:\WORLD_OLLAMA` –∏–ª–∏ `E:/WORLD_OLLAMA`
- –ï—Å–ª–∏ –ø—É—Ç—å –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω ‚Üí –æ—à–∏–±–∫–∞ `security_error`
- –ï—Å–ª–∏ –ø—É—Ç—å —Ä–∞–∑—Ä–µ—à—ë–Ω ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `success: true` —Å –ø–æ–º–µ—Ç–∫–æ–π "(STUB)"
- **–ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ git-–∫–æ–º–∞–Ω–¥—ã** (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å MVP)

**TODO (–±—É–¥—É—â–µ–µ):**

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `git2-rs` crate (–Ω–∞—Ç–∏–≤–Ω—ã–π Rust git)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (uncommitted changes)
- Whitelist —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

---

## 3. Rust-–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 3.1 Command Parser (`command_parser.rs`)

**–ú–æ–¥—É–ª—å:** `src-tauri/src/command_parser.rs` (283 —Å—Ç—Ä–æ–∫–∏)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã:**

```rust
pub enum CommandKind {
    IndexKnowledge,
    TrainAgent,
    GitPush,
}

pub struct ParsedCommand {
    pub kind: CommandKind,
    pub args: HashMap<String, String>,
}

pub enum ParseError {
    EmptyCommand,
    UnknownCommandType(String),
    InvalidFormat(String),
    MissingArgument(String),
}
```

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**

```rust
pub fn parse_command(text: &str) -> Result<ParsedCommand, ParseError>
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞—Ä—Å–∏–Ω–≥–∞:**

1. **Trim** –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É** ‚Üí `EmptyCommand`
3. **–ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏:**
   - Trim + uppercase
   - Match –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚Üí `CommandKind`
   - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ ‚Üí `UnknownCommandType`
4. **–ü–∞—Ä—Å–∏–Ω–≥ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫:**
   - –î–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏:
     - –ò—â–µ–º –ø–æ–∑–∏—Ü–∏—é `=`
     - –ò–∑–≤–ª–µ–∫–∞–µ–º KEY (trim)
     - –ò–∑–≤–ª–µ–∫–∞–µ–º VALUE:
       - **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–∞–≤—ã—á–∫–∞—Ö
       - –ü–∞—Ä—Å–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–µ–∂–¥—É `"`
     - –î–æ–±–∞–≤–ª—è–µ–º –≤ `HashMap<String, String>`
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –í—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ (`validate_index_knowledge`, `validate_train_agent`, `validate_git_push`)

**Unit-—Ç–µ—Å—Ç—ã (7 —à—Ç—É–∫):**

```rust
#[test] fn test_parse_index_knowledge()
#[test] fn test_parse_train_agent()
#[test] fn test_parse_git_push()
#[test] fn test_invalid_format()
#[test] fn test_unknown_command()
#[test] fn test_validate_index_missing_path()
#[test] fn test_validate_train_epochs_invalid()
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- ‚úÖ **–ù–µ—Ç eval()** –∏–ª–∏ shell execution
- ‚úÖ **–°—Ç—Ä–æ–≥–∏–π –ø–∞—Ä—Å–∏–Ω–≥** ‚Äî —Ç–æ–ª—å–∫–æ KEY="VALUE"
- ‚úÖ **Whitelist –∫–æ–º–∞–Ω–¥** ‚Äî —Ç–æ–ª—å–∫–æ 3 –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–∞
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤** ‚Äî –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

---

### 3.2 Execute Agent Command (`commands.rs`)

**–§—É–Ω–∫—Ü–∏—è:** `execute_agent_command(command_text: String) -> ApiResponse<ExecutionResult>`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**

1. **–ü–∞—Ä—Å–∏–Ω–≥:**
   ```rust
   let parsed = parse_command(&command_text)?;
   ```
   - –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ ‚Üí `ApiResponse::error("parse_error", ...)`

2. **Match –Ω–∞ CommandKind:**

   **INDEX KNOWLEDGE:**
   ```rust
   validate_index_knowledge(&parsed)?;
   let path = parsed.args.get("PATH").cloned().unwrap_or_default();
   let mode = parsed.args.get("MODE").cloned().unwrap_or("local");
   let profile = parsed.args.get("PROFILE").cloned().unwrap_or("default");
   
   // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ–∫–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞)
   ApiResponse::success(ExecutionResult {
       success: true,
       message: format!("INDEX KNOWLEDGE –ø—Ä–∏–Ω—è—Ç–∞:\nPATH: {}\nMODE: {}\nPROFILE: {}", ...),
       command_type: "INDEX_KNOWLEDGE",
   })
   ```

   **TRAIN AGENT:**
   ```rust
   validate_train_agent(&parsed)?;
   let profile = parsed.args.get("PROFILE").unwrap();
   let data_path = parsed.args.get("DATA_PATH").unwrap();
   let epochs = parsed.args.get("EPOCHS").and_then(|s| s.parse::<u32>().ok()).unwrap_or(3);
   
   // –ó–∞–ø–∏—Å—å —Å—Ç–∞—Ç—É—Å–∞ –≤ training_status.json
   save_training_status(&TrainingStatus {
       state: "received",
       profile: Some(profile),
       data_path: Some(data_path),
       epochs: Some(epochs),
       started_at: Some(Utc::now().to_rfc3339()),
       ...
   })?;
   
   ApiResponse::success(ExecutionResult {
       success: true,
       message: format!("TRAIN AGENT –ø—Ä–∏–Ω—è—Ç–∞ (STUB):\nPROFILE: {}\n...", ...),
       command_type: "TRAIN_AGENT",
   })
   ```

   **GIT PUSH:**
   ```rust
   validate_git_push(&parsed)?;
   let repo_path = parsed.args.get("REPO_PATH").unwrap();
   
   // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   let allowed = ["E:\\WORLD_OLLAMA", "E:/WORLD_OLLAMA"];
   if !allowed.iter().any(|p| repo_path.starts_with(p)) {
       return ApiResponse::error("security_error", "–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π REPO_PATH");
   }
   
   ApiResponse::success(ExecutionResult {
       success: true,
       message: format!("GIT PUSH –ø—Ä–∏–Ω—è—Ç–∞ (STUB):\nREPO_PATH: {}\n...", ...),
       command_type: "GIT_PUSH",
   })
   ```

**–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ Tauri:**

```rust
// lib.rs
use commands::execute_agent_command;

invoke_handler![
    // ... existing
    execute_agent_command,
]
```

---

## 4. Frontend-–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 4.1 Command Slot Store (`commandSlotStore.ts`)

**–§–∞–π–ª:** `src/lib/stores/commandSlotStore.ts`

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**

```typescript
export interface CommandSlotState {
  commandText: string;
  description: string | null;
}
```

**–ú–µ—Ç–æ–¥—ã:**

- `setCommand(commandText, description?)` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∏–∑ Chat
- `clear()` ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å Command Slot

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

- **CommandSlot.svelte** ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ store (—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
- **ChatPanel.svelte** ‚Äî –≤—ã–∑–æ–≤ `setCommand()` –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã

---

### 4.2 CommandSlot Component (`CommandSlot.svelte`)

**–§–∞–π–ª:** `src/lib/components/CommandSlot.svelte` (500+ —Å—Ç—Ä–æ–∫)

**–û—Å–Ω–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏:**

1. **–®–∞–±–ª–æ–Ω—ã –∫–æ–º–∞–Ω–¥** (Quick Access):
   - –ö–Ω–æ–ø–∫–∏: üìö INDEX, üß† TRAIN, üåø GIT
   - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ DSL

2. **–†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
   - Textarea –¥–ª—è DSL (–º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç)
   - Input –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3. **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π:**
   - üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
   - ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
   - Success (–∑–µ–ª—ë–Ω–∞—è —Ä–∞–º–∫–∞, ‚úÖ)
   - Error (–∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞, ‚ùå)
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `command_type` –∏ `message`

5. **–°–ø—Ä–∞–≤–∫–∞ –ø–æ DSL:**
   - `<details>` –±–ª–æ–∫ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–º–∞–Ω–¥
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∑–∞–≥–ª—É—à–∫–∞—Ö

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

- **Notifications** (Task 6) ‚Äî toast –ø—Ä–∏ —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ
- **apiClient** (Task 2) ‚Äî –≤—ã–∑–æ–≤ `executeAgentCommand()`
- **commandSlotStore** (Task 8.5) ‚Äî —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

### 4.3 Chat ‚Üí CommandSlot Bridge

**–§–∞–π–ª:** `src/lib/components/ChatPanel.svelte`

**–ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞:**

```svelte
<button 
  type="button"
  class="command-gen-btn"
  on:click={generateCommandFromLastUserMessage}
  disabled={messages.length === 0}
>
  üîß –ö–æ–º–∞–Ω–¥–∞
</button>
```

**–õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (`generateCommandFromLastUserMessage()`):**

1. **–ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
   ```typescript
   const lastUserMessage = [...messages].reverse().find(m => m.role === 'user');
   ```

2. **Keyword-based mapping (MVP):**

   **INDEX KNOWLEDGE:**
   - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: `–∏–Ω–¥–µ–∫—Å`, `index`, `–ø–∞–ø–∫`, `folder`, `–¥–∏—Ä–µ–∫—Ç`, `library`, `–±–∏–±–ª–∏–æ—Ç–µ–∫`
   - –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å –ø—É—Ç—å –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è (regex)
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º DSL —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ MODE

   **TRAIN AGENT:**
   - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: `–æ–±—É—á–∏`, `–æ–±—É—á–∏—Ç—å`, `train`, `fine-tune`, `–¥–æ–æ–±—É—á`, `—Ç—Ä–µ–Ω–∏—Ä`
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º DSL —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º `DATA_PATH` (–∑–∞–≥–ª—É—à–∫–∞)

3. **Notification –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ:**
   - –£—Å–ø–µ—Ö ‚Üí "–ö–æ–º–∞–Ω–¥–∞ INDEX —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É üîß Commands"
   - –ù–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ ‚Üí "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –∏–Ω–¥–µ–∫—Å, –æ–±—É—á–∏—Ç—å, train"

4. **–í—ã–∑–æ–≤ store:**
   ```typescript
   commandSlotStore.setCommand(cmd, description);
   ```

**UX:**

- –ö–Ω–æ–ø–∫–∞ disabled –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
- –ß—ë—Ç–∫–∏–µ notification —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Command Slot (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∫–ª–∞–¥–∫—É üîß Commands)

---

### 4.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Layout

**–§–∞–π–ª:** `src/routes/+page.svelte`

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**

```svelte
type View = 'chat' | 'status' | 'library' | 'commands' | 'settings';

<button class:selected={activeView === 'commands'} on:click={() => activeView = 'commands'}>
  üîß Commands
</button>
```

**–†–µ–Ω–¥–µ—Ä–∏–Ω–≥:**

```svelte
{:else if activeView === 'commands'}
  <CommandSlot />
```

**–ò—Ç–æ–≥–æ 5 –≤–∫–ª–∞–¥–æ–∫:**

1. üí¨ Chat
2. üì° System Status
3. üìö Library
4. **üîß Commands** ‚Üê Task 8
5. ‚öôÔ∏è Settings

---

## 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 5.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –º–µ—Ä—ã

1. **Whitelist –∫–æ–º–∞–Ω–¥:**
   - –¢–æ–ª—å–∫–æ 3 –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–∞: INDEX, TRAIN, GIT
   - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚Üí parse error

2. **–ù–µ—Ç shell execution:**
   - –ü–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏
   - –ù–µ—Ç –≤—ã–∑–æ–≤–∞ `std::process::Command` –∏–ª–∏ eval-–ø–æ–¥–æ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

3. **Strict parsing:**
   - –¢–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç KEY="VALUE"
   - –ó–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ –∫–∞–≤—ã—á–µ–∫ ‚Üí parse error

4. **Validation per command:**
   - –ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
   - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –æ—à–∏–±–∫–∞ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

5. **Path whitelisting (GIT):**
   - –¢–æ–ª—å–∫–æ `E:\WORLD_OLLAMA` —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–ª—è git push
   - –î—Ä—É–≥–∏–µ –ø—É—Ç–∏ ‚Üí security_error

6. **Stubs –¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**
   - TRAIN ‚Äî –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ (–º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –º–æ–¥–µ–ª—å)
   - GIT ‚Äî –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π push (–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

---

### 5.2 –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **Sandboxing –¥–ª—è TRAIN:**
   - –ó–∞–ø—É—Å–∫ LLaMA Factory –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ VRAM/CPU —á–µ—Ä–µ–∑ cgroups (Linux) –∏–ª–∏ Job Objects (Windows)

2. **Audit log:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
   - Timestamp + user + command type + arguments

3. **User confirmation –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:**
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–µ—Ä–µ–¥ TRAIN/GIT
   - "–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–π–º—ë—Ç X –º–∏–Ω—É—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Y GB VRAM"

4. **Git credentials –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ plain text:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ keyring (Windows Credential Manager)
   - OAuth —Ç–æ–∫–µ–Ω—ã –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π

---

## 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP –∏ TODO

### 6.1 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –ü—Ä–∏—á–∏–Ω–∞ |
|-----------|-------------|---------|
| INDEX KNOWLEDGE | –ü–æ–∫–∞ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `start_indexation` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ |
| TRAIN AGENT | –ó–∞–≥–ª—É—à–∫–∞ (—Å—Ç–∞—Ç—É—Å –≤ JSON) | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–µ–ª—å–∑—è —Å–ª—É—á–∞–π–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –º–æ–¥–µ–ª—å |
| GIT PUSH | –ó–∞–≥–ª—É—à–∫–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–∏) | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–µ–ª—å–∑—è —Å–ª—É—á–∞–π–Ω–æ –∑–∞–ø—É—à–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã |
| Chat –≥–µ–Ω–µ—Ä–∞—Ü–∏—è | Keyword-based (–ø—Ä–∏–º–∏—Ç–∏–≤–Ω–∞—è) | –ù–µ—Ç NLP/LLM –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TRAIN | –ù–µ—Ç UI –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ | –°—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |

---

### 6.2 TODO –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏–π

**HIGH PRIORITY (Task 9?):**

1. **INDEX KNOWLEDGE ‚Üí —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è:**
   - –ü–µ—Ä–µ–¥–∞—Ç—å PATH/MODE/PROFILE –≤ `start_indexation`
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `ingest_watcher.ps1` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

2. **TRAIN AGENT ‚Üí —Ä–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ:**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLaMA Factory API
   - PowerShell-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—É—á–µ–Ω–∏—è
   - UI –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, loss graph, ETA

3. **GIT PUSH ‚Üí —Ä–µ–∞–ª—å–Ω—ã–π git:**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `git2-rs`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ uncommitted changes
   - UI –¥–ª—è –≤–≤–æ–¥–∞ commit message

**MEDIUM PRIORITY:**

4. **LLM-based command generation:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Ollama –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ natural language ‚Üí DSL
   - Prompt: "–ü—Ä–µ–æ–±—Ä–∞–∑—É–π —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ DSL –∫–æ–º–∞–Ω–¥—É: {user_message}"
   - Fallback –Ω–∞ keyword-based –µ—Å–ª–∏ LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

5. **Command history:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
   - UI –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏

6. **Template management:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞)
   - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–æ–≤ (JSON)

**LOW PRIORITY:**

7. **Command scheduling:**
   - –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron-like)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: INDEX –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 AM

8. **Multi-command pipelines:**
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
   - –ù–∞–ø—Ä–∏–º–µ—Ä: INDEX ‚Üí TRAIN ‚Üí GIT PUSH

9. **Dry-run mode:**
   - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å" –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## 7. –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–∞

### 7.1 Rust (Backend)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –§—É–Ω–∫—Ü–∏–∏ | –¢–µ—Å—Ç—ã |
|------|--------|---------|-------|
| `command_parser.rs` | 283 | 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö + 3 –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ | 7 unit-—Ç–µ—Å—Ç–æ–≤ |
| `commands.rs` (Task 8.2) | +158 | 3 (execute_agent_command + helpers) | 0 (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ Task 8.6.2) |
| `lib.rs` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è) | +2 | 0 (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) | - |
| **–ò—Ç–æ–≥–æ Rust** | **443** | **10** | **7** |

---

### 7.2 TypeScript/Svelte (Frontend)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –§—É–Ω–∫—Ü–∏–∏/–ú–µ—Ç–æ–¥—ã | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
|------|--------|----------------|------------|
| `commandSlotStore.ts` | 47 | 2 (setCommand, clear) | - |
| `CommandSlot.svelte` | 500+ | 5 (loadTemplate, clearCommand, executeCommand, onMount, onDestroy) | 1 |
| `ChatPanel.svelte` (Task 8.5) | +95 | 1 (generateCommandFromLastUserMessage) | - |
| `+page.svelte` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) | +6 | 0 (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) | - |
| `client.ts` (API –º–µ—Ç–æ–¥) | +9 | 1 (executeAgentCommand) | - |
| **–ò—Ç–æ–≥–æ Frontend** | **657+** | **9** | **1** |

---

### 7.3 –ò—Ç–æ–≥–æ Task 8

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|-----------|------------|
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (Rust + TS/Svelte) | **1100+** |
| –ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ | **3** (`command_parser.rs`, `commandSlotStore.ts`, `CommandSlot.svelte`) |
| –ò–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ | **4** (`commands.rs`, `lib.rs`, `ChatPanel.svelte`, `+page.svelte`, `client.ts`) |
| Unit-—Ç–µ—Å—Ç–æ–≤ | **7** (Rust) |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ | **5** (—Å–º. TASK_8_TESTING_GUIDE.md) |
| –¢–∏–ø–æ–≤ –∫–æ–º–∞–Ω–¥ | **3** (INDEX, TRAIN, GIT) |
| –ù–æ–≤—ã—Ö –≤–∫–ª–∞–¥–æ–∫ UI | **1** (üîß Commands) |

---

## 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–º. **TASK_8_TESTING_GUIDE.md** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç –ø—Ä–∏—ë–º–∫–∏:**

- ‚úÖ **8.1** –ü–∞—Ä—Å–µ—Ä –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **8.1** –í—Å–µ 7 unit-—Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ **8.2** execute_agent_command –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ Tauri
- ‚úÖ **8.3** CommandSlot –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫–µ üîß Commands
- ‚úÖ **8.4** –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É 5 –≤–∫–ª–∞–¥–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **8.5** –ö–Ω–æ–ø–∫–∞ "üîß –ö–æ–º–∞–Ω–¥–∞" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ ChatPanel
- ‚úÖ **8.5** commandSlotStore —Ä–∞–±–æ—Ç–∞–µ—Ç (Chat ‚Üí CommandSlot —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- ‚è≥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Å–º. TESTING_GUIDE (5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)

---

## 9. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–µ–∫—Ç–æ–º

### 9.1 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö Task

| Task | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Task 8 |
|------|-------------|------------------------|
| **Task 2** | Core Bridge (Tauri commands) | –®–∞–±–ª–æ–Ω `ApiResponse<T>`, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ |
| **Task 3** | ChatPanel | –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã, –¥–æ—Å—Ç—É–ø –∫ messages[] |
| **Task 6** | Notifications | Toast –ø—Ä–∏ —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã |
| **Task 7** | Indexation API | –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ INDEX |

---

### 9.2 –í–ª–∏—è–Ω–∏–µ –Ω–∞ –±—É–¥—É—â–∏–µ Task

**Task 9 (–≤–æ–∑–º–æ–∂–Ω–∞—è —Ç–µ–º–∞):**

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è TRAIN AGENT (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LLaMA Factory)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –∏ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**Task 10 (–≤–æ–∑–º–æ–∂–Ω–∞—è —Ç–µ–º–∞):**

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è GIT PUSH (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è git2-rs)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –≤ Git LFS
- UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–º–∏—Ç–æ–≤

---

## 10. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 10.1 –¢–µ–∫—É—â–∏–µ –±–∞–≥–∏

**–ù–µ—Ç** (–Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP).

---

### 10.2 Warnings –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

**Rust:**

```
warning: function `execute_agent_command` is never used
warning: enum `CommandKind` is never used
...
```

**–ü—Ä–∏—á–∏–Ω–∞:** –§—É–Ω–∫—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω—ã, –Ω–æ –ø–æ–∫–∞ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ UI (UI —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω).

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è warnings –∏—Å—á–µ–∑–Ω—É—Ç.

---

**TypeScript:**

```
warning: unused CSS selector ".message"
...
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ CSS-–∫–ª–∞—Å—Å—ã –±—ã–ª–∏ –≤ —à–∞–±–ª–æ–Ω–µ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤—ë—Ä—Å—Ç–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è MVP, –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–æ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏.

---

## 11. Changelog

### v1.0 (27 –Ω–æ—è–±—Ä—è 2025)

**Added:**

- ‚úÖ DSL –ø–∞—Ä—Å–µ—Ä –¥–ª—è 3 —Ç–∏–ø–æ–≤ –∫–æ–º–∞–Ω–¥ (INDEX, TRAIN, GIT)
- ‚úÖ Rust backend: `command_parser.rs` + `execute_agent_command`
- ‚úÖ Frontend: `CommandSlot.svelte` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ Chat ‚Üí CommandSlot bridge (store + –∫–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
- ‚úÖ 5-—è –≤–∫–ª–∞–¥–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: üîß Commands
- ‚úÖ –®–∞–±–ª–æ–Ω—ã –∫–æ–º–∞–Ω–¥ (Quick Access)
- ‚úÖ –°–ø—Ä–∞–≤–∫–∞ –ø–æ DSL (details –±–ª–æ–∫)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å notifications (Task 6)

**Security:**

- ‚úÖ Whitelist –∫–æ–º–∞–Ω–¥ (—Ç–æ–ª—å–∫–æ INDEX/TRAIN/GIT)
- ‚úÖ Strict parsing (KEY="VALUE" —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ TRAIN/GIT –∑–∞–≥–ª—É—à–∫–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å MVP)
- ‚úÖ GIT path whitelisting (—Ç–æ–ª—å–∫–æ E:\WORLD_OLLAMA)

**Tests:**

- ‚úÖ 7 unit-—Ç–µ—Å—Ç–æ–≤ (Rust)
- ‚úÖ 5 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (—Å–º. TESTING_GUIDE)

---

## 12. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Task 8 –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω** ‚úÖ –≤ —Ä–∞–º–∫–∞—Ö MVP.

**–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**

1. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π DSL** ‚Äî –Ω–∏–∫–∞–∫–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ shell execution
2. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –ª—ë–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Chat ‚Üî Commands** ‚Äî –ø—Ä–æ—Å—Ç–æ–π UX –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ
5. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é** ‚Äî TODO —Å–ø–∏—Å–æ–∫ –¥–ª—è Task 9/10

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

- –ü—Ä–∏—ë–º–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–º. TASK_8_TESTING_GUIDE.md)
- –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ INDEX KNOWLEDGE —Å —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Task 9 (TRAIN AGENT —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~6 —á–∞—Å–æ–≤ (8.1-8.6)

**–í–µ—Ä—Å–∏—è:** 1.0 (MVP)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ü–†–ò–Å–ú–ö–ï**
