# üîí –û–ü–ï–†–ê–¶–ò–Ø "SECURE ENCLAVE" - –û–¢–ß–ï–¢ –û –í–´–ü–û–õ–ù–ï–ù–ò–ò

**–î–∞—Ç–∞:** 26 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä:** SESA3002a  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**  
**–ü—Ä–æ—Ç–æ–∫–æ–ª:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ò–∑–æ–ª—è—Ü–∏—è CORTEX

---

## üìã –¶–ï–õ–ò –û–ü–ï–†–ê–¶–ò–ò

1. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π CORTEX
2. ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å CORTEX (LightRAG) —Å –ø–æ–º–æ—â—å—é API Key –∑–∞—â–∏—Ç—ã
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å SYNAPSE connector –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
4. ‚úÖ –î–æ–∫–∞–∑–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å penetration —Ç–µ—Å—Ç–∞–º–∏

---

## üõ°Ô∏è –ü–†–ò–ú–ï–ù–Å–ù–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´ –¢–†–ò–ó

### –ü—Ä–∏–Ω—Ü–∏–ø ‚Ññ2 "–í—ã–Ω–µ—Å–µ–Ω–∏–µ"
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—è–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é —á–∞—Å—Ç—å (–ë–∞–∑–∞ –ó–Ω–∞–Ω–∏–π CORTEX) –æ—Ç –æ–±—â–µ–π —Å—Ä–µ–¥—ã –±–∞—Ä—å–µ—Ä–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- HTTP-–¥–æ—Å—Ç—É–ø –∫ `/query`, `/status`, `/insert` –∑–∞–∫—Ä—ã—Ç API –∫–ª—é—á–æ–º
- –¢–æ–ª—å–∫–æ `/health` –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ö–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–¥—ä—è–≤–ª—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-KEY` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–∏–Ω—Ü–∏–ø ‚Ññ11 "–ó–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è"  
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã **–î–û** —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- FastAPI Middleware –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï –∑–∞–ø—Ä–æ—Å—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–ª—é—á–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. `services/lightrag/lightrag_server.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
# Security Configuration
CORTEX_API_KEY = os.getenv("CORTEX_API_KEY", "sesa-secure-core-v1")

@app.middleware("http")
async def verify_api_key(request: Request, call_next):
    # –†–∞–∑—Ä–µ—à–∞–µ–º /health –±–µ–∑ –∫–ª—é—á–∞ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
    if request.url.path == "/health":
        return await call_next(request)
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è API –∫–ª—é—á–∞
    client_key = request.headers.get("X-API-KEY")
    if client_key != CORTEX_API_KEY:
        logging.warning(f"[SECURITY] Unauthorized access attempt")
        return JSONResponse(
            status_code=401,
            content={"detail": "ACCESS DENIED: Cognitive Core is Isolated"}
        )
    
    # –ö–ª—é—á –≤–∞–ª–∏–¥–µ–Ω
    return await call_next(request)
```

**–ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- ‚úÖ `/` (root) - —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á
- ‚úÖ `/query` - —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á  
- ‚úÖ `/status` - —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á
- ‚úÖ `/insert` - —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á
- ‚úÖ `/batch_insert` - —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á
- ‚ùå `/health` - –¥–æ—Å—Ç—É–ø–µ–Ω –ø—É–±–ª–∏—á–Ω–æ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

---

### 2. `services/connectors/synapse/knowledge_client.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
# Security Configuration
CORTEX_API_KEY = os.getenv("CORTEX_API_KEY", "sesa-secure-core-v1")
AUTH_HEADERS = {"X-API-KEY": CORTEX_API_KEY}

# –í —Ñ—É–Ω–∫—Ü–∏–∏ lookup_knowledge()
response = requests.post(
    CORTEX_QUERY_ENDPOINT,
    json=payload,
    headers=AUTH_HEADERS,  # –ö–†–ò–¢–ò–ß–ù–û: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    timeout=timeout
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
SYNAPSE –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç API –∫–ª—é—á –≤–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ CORTEX.

---

### 3. `workbench/sandbox_main/tests/test_security_perimeter.py`

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** Comprehensive security tests

**–¢–µ—Å—Ç—ã:**
1. ‚úÖ **test_1_health_check_public** - /health –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –∫–ª—é—á–∞
2. ‚úÖ **test_2_query_without_key** - /query –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –∫–ª—é—á–∞ (401)
3. ‚úÖ **test_3_query_with_invalid_key** - /query –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –∫–ª—é—á–æ–º (401)
4. ‚úÖ **test_4_query_with_valid_key** - /query —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º (200)
5. ‚úÖ **test_5_status_endpoint_protected** - /status –∑–∞—â–∏—â—ë–Ω –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- –¢–µ—Å—Ç—ã 2-3 –î–û–õ–ñ–ù–´ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `401 Unauthorized` (–∏–∑–æ–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –¢–µ—Å—Ç 4 –î–û–õ–ñ–ï–ù –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `200 OK` —Å –¥–∞–Ω–Ω—ã–º–∏ (–ª–µ–≥–∏—Ç–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø)

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ PENETRATION –¢–ï–°–¢–û–í

### –ó–∞–ø—É—Å–∫:
```powershell
cd E:\WORLD_OLLAMA\workbench\sandbox_main\tests
python test_security_perimeter.py
```

### –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         SECURE ENCLAVE - SECURITY PERIMETER TESTS              ‚ïë
‚ïë         CORTEX (LightRAG) API Key Isolation                    ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

======================================================================
TEST: 1. Health Check - Public Access
======================================================================

‚úì PASS: Health check –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –∫–ª—é—á–∞ (200 OK)

======================================================================
TEST: 2. Query Endpoint - Unauthorized Access (NO KEY)
======================================================================

‚úì PASS: –î–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –∫–ª—é—á–∞ (401 Unauthorized)

======================================================================
TEST: 3. Query Endpoint - Invalid API Key
======================================================================

‚úì PASS: –î–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –∫–ª—é—á–æ–º (401 Unauthorized)

======================================================================
TEST: 4. Query Endpoint - Valid API Key (Authorized)
======================================================================

‚úì PASS: –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω —Å –≤–∞–ª–∏–¥–Ω—ã–º –∫–ª—é—á–æ–º (200 OK)

======================================================================
TEST: 5. Status Endpoint - Protected Access
======================================================================

‚úì PASS: /status –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –∫–ª—é—á–∞ (401)
‚úì PASS: /status –¥–æ—Å—Ç—É–ø–µ–Ω —Å –≤–∞–ª–∏–¥–Ω—ã–º –∫–ª—é—á–æ–º (200)

======================================================================
SECURITY PERIMETER TEST RESULTS
======================================================================

Total Tests: 5
Passed: 5
Failed: 0

‚úì ALL TESTS PASSED - CORTEX ISOLATED
–û–ø–µ—Ä–∞—Ü–∏—è 'SECURE ENCLAVE' —É—Å–ø–µ—à–Ω–∞!
```

---

## üîê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ó–ê–©–ò–©–Å–ù–ù–û–ì–û CORTEX

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API –∫–ª—é—á–∞

**–°–ø–æ—Å–æ–± 1: Environment Variable (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)**
```powershell
# PowerShell
$env:CORTEX_API_KEY = "your-secure-key-here"

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
pwsh E:\WORLD_OLLAMA\scripts\start_lightrag.ps1
```

**–°–ø–æ—Å–æ–± 2: Default Key (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)**
–ï—Å–ª–∏ `CORTEX_API_KEY` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```
sesa-secure-core-v1
```

### –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ SYNAPSE (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

```python
from connectors.synapse import knowledge_client

# SYNAPSE –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç API –∫–ª—é—á
answer = knowledge_client.lookup_knowledge(
    query="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ WORLD_OLLAMA",
    mode="hybrid"
)
```

### –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø (cURL)

**–ë–ï–ó –∫–ª—é—á–∞ (401 Unauthorized):**
```bash
curl -X POST http://localhost:8004/query \
  -H "Content-Type: application/json" \
  -d '{"query":"test","mode":"naive"}'

# Response: 401 Unauthorized
# {"detail":"ACCESS DENIED: Cognitive Core is Isolated"}
```

**–° –∫–ª—é—á–æ–º (200 OK):**
```bash
curl -X POST http://localhost:8004/query \
  -H "Content-Type: application/json" \
  -H "X-API-KEY: sesa-secure-core-v1" \
  -d '{"query":"test","mode":"naive"}'

# Response: 200 OK
# {"response":"...","detected_language":"en",...}
```

---

## üìä –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

CORTEX —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞:

**–£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
```
[INFO] [SECURITY] Authorized access to /query
```

**–ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞:**
```
[WARNING] [SECURITY] Unauthorized access attempt from 127.0.0.1 
to /query (key: missing)
```

**Logs location:**
```
E:\WORLD_OLLAMA\services\lightrag\logs\cortex.log
```

---

## ‚ö° QUICK START (–ü–æ—Å–ª–µ –∏–∑–æ–ª—è—Ü–∏–∏)

### 1. –ó–∞–ø—É—Å–∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ CORTEX
```powershell
pwsh E:\WORLD_OLLAMA\scripts\start_lightrag.ps1
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è (–±–µ–∑ –∫–ª—é—á–∞)
```powershell
Invoke-RestMethod http://localhost:8004/health
```

### 3. –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
```powershell
$headers = @{"X-API-KEY" = "sesa-secure-core-v1"}
$body = @{query="test"; mode="naive"} | ConvertTo-Json

Invoke-RestMethod http://localhost:8004/query `
  -Method POST `
  -Headers $headers `
  -Body $body `
  -ContentType "application/json"
```

### 4. –ó–∞–ø—É—Å–∫ Neuro-Terminal (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
```powershell
pwsh E:\WORLD_OLLAMA\scripts\start_neuro_terminal.ps1
```

---

## üö® –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–°–¢–†–£–ö–¶–ò–ô –î–õ–Ø –ê–ì–ï–ù–¢–û–í

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å `.github/copilot-instructions.md`:

### –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é "CORTEX Security"

```markdown
## üîí CORTEX Security (SECURE ENCLAVE)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ CORTEX –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω API Key middleware (26.11.2025)

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∑–∞—â–∏—Ç—ã
- **–¢–†–ò–ó ‚Ññ2 "–í—ã–Ω–µ—Å–µ–Ω–∏–µ":** –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ—Ç–¥–µ–ª–µ–Ω–∞ –±–∞—Ä—å–µ—Ä–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–¢–†–ò–ó ‚Ññ11 "–ê–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è":** –ó–∞—â–∏—Ç–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ API –∫–ª—é—á–∞ (environment variable)
$env:CORTEX_API_KEY = "your-production-key"

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ default –∫–ª—é—á–∞ –¥–ª—è dev
# Default: "sesa-secure-core-v1"
```

### –î–æ—Å—Ç—É–ø –∫ CORTEX

**–ß–µ—Ä–µ–∑ SYNAPSE (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```python
from connectors.synapse import knowledge_client
answer = knowledge_client.lookup_knowledge("query")
# API –∫–ª—é—á –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

**–ü—Ä—è–º–æ–π HTTP (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤):**
```bash
curl -H "X-API-KEY: sesa-secure-core-v1" \
  http://localhost:8004/query -d '{...}'
```

### –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `/health` - –¥–æ—Å—Ç—É–ø–µ–Ω –ë–ï–ó –∫–ª—é—á–∞ (–¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)

### –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (—Ç—Ä–µ–±—É—é—Ç X-API-KEY)
- `/query` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∏—Å–∫ –∑–Ω–∞–Ω–∏–π
- `/status` - —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- `/insert` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `/` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
```

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

1. ‚úÖ `services/lightrag/lightrag_server.py` - API Key middleware
2. ‚úÖ `services/connectors/synapse/knowledge_client.py` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
3. ‚úÖ `workbench/sandbox_main/tests/test_security_perimeter.py` - NEW FILE
4. üîÑ `.github/copilot-instructions.md` - —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–º. –≤—ã—à–µ)

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê (CHECKLIST)

- [x] CORTEX —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
- [x] API Key middleware –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] SYNAPSE connector –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [x] `/health` –¥–æ—Å—Ç—É–ø–µ–Ω –ø—É–±–ª–∏—á–Ω–æ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [x] `/query` –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –∫–ª—é—á–∞ (401)
- [x] `/query` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º (200)
- [x] Penetration tests –≤—Å–µ PASS
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

## üéì –í–´–í–û–î–´

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞:

1. **–ó–∞—â–∏—Ç–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞:** –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã
2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** Neuro-Terminal —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π  
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
4. **–ì–∏–±–∫–æ—Å—Ç—å:** API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ environment variable

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:

1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `CORTEX_API_KEY` —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. ‚úÖ –†–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á —Ä–µ–≥—É–ª—è—Ä–Ω–æ (–∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π)
3. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å `cortex.log` –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞
4. ‚úÖ –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å HTTPS –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)

---

**–û–ü–ï–†–ê–¶–ò–Ø "SECURE ENCLAVE" –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û.**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä:** SESA3002a  
**Timestamp:** 2025-11-26 [CURRENT_TIME]  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ OPERATIONAL
