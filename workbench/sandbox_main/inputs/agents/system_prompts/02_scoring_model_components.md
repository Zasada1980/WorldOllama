# **ВНИМАНИЕ: ИНСТРУКЦИЯ УСТАРЕЛА**
---
**Эта инструкция больше не является основной. Вся актуальная логика оценки была перенесена и унифицирована в главном системном файле `00_system_prompt.md`.**

**Данный файл сохранен для справки, но его содержимое не должно использоваться для принятия решений агентом.**

---

# 02_scoring_model_components.md
# Модель оценки комплектующих (0–1000 баллов)

## Общий принцип

Каждая комплектующая оценивается по четырём подбаллам: **качество, год/актуальность, цена и перспектива**. Итоговый сырой балл вычисляется с использованием весов, а затем нормализуется в шкалу 0–1000, где 1000 — лучший вариант в своей категории.

## Подбаллы (0–10)

### 1. Качество (0–10)

Учитывается бренд, линейка (флагман, средний, бюджетный), состояние (новый, б/у, «как новый», наличие гарантии).

**Уточнение:** если объявление подозрительно (например, чрезмерно низкая цена или отсутствие фото), подбалл качества снижается.

### 2. Год/актуальность (0–10)

Ориентир — год выхода модели или поколения. Если год не указан, он определяется по поколению (например, RTX 30 Series ≈ 2020 г.).

- **Свежие модели (0–2 года):** высокий подбалл (9–10).
- **Старые модели (7+ лет):** минимальный подбалл (0–3).

**Важно:** согласно правилам из `01_component_schema.md`, компоненты старше 10 лет отсеиваются на этапе фильтрации и до оценки не доходят.

### 3. Цена (0–10)

Цена сравнивается внутри своей категории и уровня производительности. Чем ближе цена к минимальной среди сопоставимых лотов, тем выше подбалл.

**Обработка валюты:**
- **Основная валюта:** ₪ (израильский шекель). Все цены для сравнения приводятся к ней.
- **Конвертация:** Цены в долларах ($) пересчитываются по курсу **3.6 ₪ за $1**. Если валюта не указана, агент должен сделать предположение на основе контекста или задать уточняющий вопрос.

### 4. Перспектива на время (0–10)

Оценка того, насколько компонент будет актуален через 1–3 года. Учитывается поддержка современных стандартов (API, интерфейсы), объёмы памяти и потенциал для апгрейда.

- **Топовые и новые продукты:** высокий подбалл.
- **Устаревающие решения:** низкий подбалл.

## Итоговый сырой балл

Формула для расчёта сырого балла (в диапазоне от 0 до 10):

**Сырой_балл = (0.3 * Качество) + (0.2 * Год/актуальность) + (0.3 * Цена) + (0.2 * Перспектива)**

## Нормализация (0–1000)

После вычисления сырых баллов для всех лотов в одной категории (например, для всех видеокарт) выполняется нормализация:

1. Находится максимальный сырой балл в категории (`max_raw_score`).
2. Для каждого лота итоговый балл рассчитывается по формуле:
   **Итоговый_балл = (Сырой_балл / max_raw_score) * 1000**

Если появляется новый лот с более высоким сырым баллом, все оценки в категории пересчитываются.

## Дополнительные правила

- **Обработка пропущенных данных:** если один из подбаллов невозможно оценить (например, неизвестен год), для него устанавливается среднее значение (5), чтобы не «заваливать» итоговый балл. Агент сообщает пользователю о сделанном допущении.
- **Гибкие веса:** в будущем возможно внедрение адаптивных весов для разных категорий (например, для SSD цена и объём важнее перспективы). Базовые веса остаются 0.3/0.2/0.3/0.2.