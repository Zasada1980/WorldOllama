# ‚úÖ –ì–û–¢–û–í–û! AI Librarian Core —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞:**
- ‚úÖ Ollama Brain: `http://localhost:11434`
- ‚úÖ Open WebUI: `http://localhost:3001`
- ‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: 9 Floor_*.md —Ñ–∞–π–ª–æ–≤ –≤ `library_source/`

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ)

### –®–ê–ì 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Open WebUI (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: **http://localhost:3001**
2. –ù–∞–∂–º–∏—Ç–µ **Sign Up**
3. –í–≤–µ–¥–∏—Ç–µ:
   - Email: `admin@localhost` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π)
   - Password: –≤–∞—à –ø–∞—Ä–æ–ª—å
4. –ù–∞–∂–º–∏—Ç–µ **Create Account**

> üí° **–ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.**

---

### –®–ê–ì 2: –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ Qwen 2.5 32B (15-25 –º–∏–Ω—É—Ç)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```powershell
cd E:\AI_Librarian_Core
.\download_model.ps1
```

**–†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ WebUI:**
1. WebUI ‚Üí Settings (‚öôÔ∏è) ‚Üí Models
2. Pull a model from Ollama.com
3. –í–≤–µ–¥–∏—Ç–µ: `qwen2.5:32b-instruct-q4_k_m`
4. –ù–∞–∂–º–∏—Ç–µ **Pull Model**

**–û–∂–∏–¥–∞–π—Ç–µ:** ~19GB —Å–∫–∞—á–∏–≤–∞–Ω–∏—è, –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ WebUI.

---

### –®–ê–ì 3: –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å" (5 –º–∏–Ω—É—Ç)

1. WebUI ‚Üí Workspace ‚Üí Models ‚Üí **+ Create a model**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name:** `librarian`
   - **Model ID:** `librarian:latest`
   - **Base Model:** `qwen2.5:32b-instruct-q4_k_m`
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `E:\AI_Librarian_Core\Librarian.Modelfile`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤–µ—Å—å –±–ª–æ–∫ SYSTEM** (–Ω–∞—á–∏–Ω–∞—è —Å `SYSTEM """` –¥–æ `"""`)
5. –í—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ **System Prompt**
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–ø–∞—Ä–∞–º–µ—Ç—Ä—ã PARAMETER**:
   - Temperature: `0.3`
   - Context Length: `16384`
   - Repeat Penalty: `1.1`
   - Top P: `0.9`
   - Top K: `40`
7. –ù–∞–∂–º–∏—Ç–µ **Save**

---

### –®–ê–ì 4: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (RAG) (5-10 –º–∏–Ω—É—Ç)

1. WebUI ‚Üí Workspace ‚Üí **Documents**
2. –ù–∞–∂–º–∏—Ç–µ **Upload Files**
3. –í—ã–±–µ—Ä–∏—Ç–µ **–í–°–ï —Ñ–∞–π–ª—ã** –∏–∑ `E:\AI_Librarian_Core\library_source\`:
   - 9 —Ñ–∞–π–ª–æ–≤ `Floor_*.md`
   - 9 —Ñ–∞–π–ª–æ–≤ `Floor_*_index.json`
   - `library_index.json`
   - `usage_stats.json`
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
5. Settings ‚Üí Documents ‚Üí **Enable Embeddings** (–µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ)
6. Embedding Model: `nomic-embed-text:latest` (–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:** 5-10 –º–∏–Ω—É—Ç –≤ —Ñ–æ–Ω–µ.

---

### –®–ê–ì 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (2 –º–∏–Ω—É—Ç—ã)

1. WebUI ‚Üí New Chat
2. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å: **librarian**
3. –í–∫–ª—é—á–∏—Ç–µ **RAG** (–∏–∫–æ–Ω–∫–∞ üìÑ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞)
4. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:

```
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. 
–°–∫–æ–ª—å–∫–æ —ç—Ç–∞–∂–µ–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç? 
–ü–µ—Ä–µ—á–∏—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–∂–µ.
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ [–ò–°–¢–û–ß–ù–ò–ö: –ë–ò–ë–õ–ò–û–¢–ï–ö–ê].
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
- –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑–∞—Ç—å 9 —ç—Ç–∞–∂–µ–π (Floor_01 - Floor_09)
- –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —Ç–µ–º—ã: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –î–∏–∑–∞–π–Ω", "–ö–æ–¥ –∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è", –∏ —Ç.–¥.
- –ü–æ–º–µ—Ç–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏: `[–ò–°–¢–û–ß–ù–ò–ö: –ë–ò–ë–õ–ò–û–¢–ï–ö–ê]`

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
```powershell
cd E:\AI_Librarian_Core
.\stop.ps1
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:
```powershell
.\restart.ps1
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```powershell
.\logs.ps1        # –í—Å–µ –ª–æ–≥–∏
.\logs.ps1 ollama # –¢–æ–ª—å–∫–æ Ollama
.\logs.ps1 webui  # –¢–æ–ª—å–∫–æ WebUI
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```powershell
.\status.ps1
```

---

## üéÆ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ VRAM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏:

```powershell
# –†–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
nvidia-smi

# –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)
while ($true) { 
    Clear-Host
    nvidia-smi --query-gpu=memory.used,memory.total,utilization.gpu --format=csv
    Start-Sleep -Seconds 2
}
```

---

## ‚ö†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –≤–ª–µ–∑–∞–µ—Ç –≤ VRAM

**–†–µ—à–µ–Ω–∏–µ 1:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ
```powershell
docker exec -it librarian_brain ollama pull qwen2.5:32b-instruct-q3_k_m
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –º–æ–¥–µ–ª—å 14B
```powershell
docker exec -it librarian_brain ollama pull qwen2.5:14b-instruct-q4_k_m
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

- –£–º–µ–Ω—å—à–∏—Ç–µ `num_ctx` —Å 16384 –¥–æ 8192 –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–æ–¥–µ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å –º–µ–Ω—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (14B –∏–ª–∏ 8B)

### –ü—Ä–æ–±–ª–µ–º–∞: WebUI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```powershell
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker restart librarian_interface

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs librarian_interface
```

---

## üöÄ –í—ã –≥–æ—Ç–æ–≤—ã!

**–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:** http://localhost:3001

–ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π –¥–∏–∞–ª–æ–≥ —Å –∞–≥–µ–Ω—Ç–æ–º-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä–µ–º! üß†üìö
