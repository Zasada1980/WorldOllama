"""

Open WebUI Tool: Knowledge Base Lookup (SYNAPSE)

╨Ш╨╜╤В╨╡╨│╤А╨░╤Ж╨╕╤П CORTEX (LightRAG) ╨▓ Open WebUI ╤З╨╡╤А╨╡╨╖ Native Tools API



╨Ш╨Э╨б╨в╨а╨г╨Ъ╨ж╨Ш╨п ╨Я╨Ю ╨г╨б╨в╨Р╨Э╨Ю╨Т╨Ъ╨Х:

1. ╨Ю╤В╨║╤А╨╛╨╣╤В╨╡ Open WebUI (http://localhost:3100)

2. ╨Я╨╡╤А╨╡╨╣╨┤╨╕╤В╨╡ ╨▓ Workspace тЖТ Tools

3. ╨Э╨░╨╢╨╝╨╕╤В╨╡ "+ Add Tool"

4. ╨б╨║╨╛╨┐╨╕╤А╤Г╨╣╤В╨╡ ╨Т╨б╨Б ╤Б╨╛╨┤╨╡╤А╨╢╨╕╨╝╨╛╨╡ ╤Н╤В╨╛╨│╨╛ ╤Д╨░╨╣╨╗╨░

5. ╨Т╤Б╤В╨░╨▓╤М╤В╨╡ ╨▓ ╤А╨╡╨┤╨░╨║╤В╨╛╤А Tool Code

6. ╨б╨╛╤Е╤А╨░╨╜╨╕╤В╨╡ ╨║╨░╨║ "Knowledge Base"

7. ╨Р╨║╤В╨╕╨▓╨╕╤А╤Г╨╣╤В╨╡ ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В ╨▓ ╨╜╨░╤Б╤В╤А╨╛╨╣╨║╨░╤Е ╨╝╨╛╨┤╨╡╨╗╨╕ qwen2-main



Created: 25.11.2025 (TD-007 NEURAL LINK)

Author: SESA3002a + GitHub Copilot

"""



import requests

import json

from typing import Optional

from pydantic import BaseModel, Field





class Tools:

    """

    Open WebUI Tool Class ╨┤╨╗╤П ╨╕╨╜╤В╨╡╨│╤А╨░╤Ж╨╕╨╕ ╤Б CORTEX (LightRAG)

    

    ╨н╤В╨╛╤В ╨║╨╗╨░╤Б╤Б ╤Б╨╗╨╡╨┤╤Г╨╡╤В ╤Б╨┐╨╡╤Ж╨╕╤Д╨╕╨║╨░╤Ж╨╕╨╕ Open WebUI Tools API:

    - ╨Ь╨╡╤В╨╛╨┤╤Л ╤Б ╨┐╤А╨╡╤Д╨╕╨║╤Б╨╛╨╝ 'action_' ╨░╨▓╤В╨╛╨╝╨░╤В╨╕╤З╨╡╤Б╨║╨╕ ╤А╨╡╨│╨╕╤Б╤В╤А╨╕╤А╤Г╤О╤В╤Б╤П ╨║╨░╨║ ╨┤╨╛╤Б╤В╤Г╨┐╨╜╤Л╨╡ ╨┤╨╡╨╣╤Б╤В╨▓╨╕╤П

    - Docstring ╨╝╨╡╤В╨╛╨┤╨░ ╤Б╤В╨░╨╜╨╛╨▓╨╕╤В╤Б╤П ╨╛╨┐╨╕╤Б╨░╨╜╨╕╨╡╨╝ ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В╨░

    - Pydantic BaseModel ╨╕╤Б╨┐╨╛╨╗╤М╨╖╤Г╨╡╤В╤Б╤П ╨┤╨╗╤П ╨▓╨░╨╗╨╕╨┤╨░╤Ж╨╕╨╕ ╨┐╨░╤А╨░╨╝╨╡╤В╤А╨╛╨▓

    """

    

    class Valves(BaseModel):

        """

        ╨Ъ╨╛╨╜╤Д╨╕╨│╤Г╤А╨░╤Ж╨╕╨╛╨╜╨╜╤Л╨╡ ╨┐╨░╤А╨░╨╝╨╡╤В╤А╤Л ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В╨░ (╤А╨╡╨┤╨░╨║╤В╨╕╤А╤Г╤О╤В╤Б╤П ╨▓ UI)

        """

        CORTEX_BASE_URL: str = Field(

            default="http://localhost:8004",

            description="Base URL ╨┤╨╗╤П CORTEX (LightRAG) ╤Б╨╡╤А╨▓╨╡╤А╨░"

        )

        DEFAULT_TIMEOUT: int = Field(

            default=120,

            description="╨в╨░╨╣╨╝╨░╤Г╤В ╨╖╨░╨┐╤А╨╛╤Б╨╛╨▓ ╨▓ ╤Б╨╡╨║╤Г╨╜╨┤╨░╤Е (LLM generation ╨╝╨╛╨╢╨╡╤В ╨╖╨░╨╜╤П╤В╤М 30-90s)"

        )

        DEFAULT_MODE: str = Field(

            default="hybrid",

            description="╨а╨╡╨╢╨╕╨╝ ╨┐╨╛╨╕╤Б╨║╨░ ╨┐╨╛ ╤Г╨╝╨╛╨╗╤З╨░╨╜╨╕╤О (naive/local/global/hybrid)"

        )

    

    def __init__(self):

        self.valves = self.Valves()

    

    def _check_cortex_health(self) -> bool:

        """

        ╨Т╨╜╤Г╤В╤А╨╡╨╜╨╜╤П╤П ╨┐╤А╨╛╨▓╨╡╤А╨║╨░ ╨┤╨╛╤Б╤В╤Г╨┐╨╜╨╛╤Б╤В╨╕ CORTEX

        """

        try:

            response = requests.get(

                f"{self.valves.CORTEX_BASE_URL}/health",

                timeout=5

            )

            if response.status_code == 200:

                health = response.json()

                return health.get("status") == "healthy"

            return False

        except Exception:

            return False

    

    def action_lookup_knowledge(

        self,

        query: str,

        mode: Optional[str] = None

    ) -> str:

        """

        ╨Я╨╛╨╕╤Б╨║ ╨╕╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╨╕ ╨▓ ╨▒╨░╨╖╨╡ ╨╖╨╜╨░╨╜╨╕╨╣ ╨┐╤А╨╛╨╡╨║╤В╨░ WORLD_OLLAMA (331 ╨┤╨╛╨║╤Г╨╝╨╡╨╜╤В).

        

        ╨Ш╤Б╨┐╨╛╨╗╤М╨╖╤Г╨╣╤В╨╡ ╤Н╤В╨╛╤В ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В ╨┤╨╗╤П ╨┐╨╛╨╗╤Г╤З╨╡╨╜╨╕╤П ╤В╨╡╤Е╨╜╨╕╤З╨╡╤Б╨║╨╕╤Е ╨┤╨╡╤В╨░╨╗╨╡╨╣, ╨┤╨╛╨║╤Г╨╝╨╡╨╜╤В╨░╤Ж╨╕╨╕,

        ╨╛╤В╤З╨╡╤В╨╛╨▓ ╨┐╨╛ ╤В╨╡╨╝╨░╨╝: GPU overclocking (RTX 5060 Ti), SSL certificates, 

        AI agents (LangGraph, CrewAI), ╨в╨а╨Ш╨Ч principles, LightRAG, Project structure.

        

        ╨С╨░╨╖╨░ ╨╖╨╜╨░╨╜╨╕╨╣ ╤Б╨╛╨┤╨╡╤А╨╢╨╕╤В 1469 ╤Б╤Г╤Й╨╜╨╛╤Б╤В╨╡╨╣ ╨╕ 1560 ╤Б╨▓╤П╨╖╨╡╨╣ ╨▓ ╨│╤А╨░╤Д╨╡ ╨╖╨╜╨░╨╜╨╕╨╣.

        

        Args:

            query (str): ╨в╨╛╤З╨╜╤Л╨╣ ╨╕ ╨┐╨╛╨┤╤А╨╛╨▒╨╜╤Л╨╣ ╨┐╨╛╨╕╤Б╨║╨╛╨▓╤Л╨╣ ╨╖╨░╨┐╤А╨╛╤Б. ╨С╤Г╨┤╤М╤В╨╡ ╨║╨╛╨╜╨║╤А╨╡╤В╨╜╤Л 

                        ╨╕ ╨╕╤Б╨┐╨╛╨╗╤М╨╖╤Г╨╣╤В╨╡ ╤В╨╡╤Е╨╜╨╕╤З╨╡╤Б╨║╨╕╨╡ ╤В╨╡╤А╨╝╨╕╨╜╤Л.

                        ╨Я╤А╨╕╨╝╨╡╤А╤Л: 

                        - "╨Ъ╨░╨║ ╤А╨░╨╖╨╛╨│╨╜╨░╤В╤М ╨┐╨░╨╝╤П╤В╤М RTX 5060 Ti ╤З╨╡╤А╨╡╨╖ MSI Afterburner?"

                        - "╨б╤В╤А╤Г╨║╤В╤Г╤А╨░ ╨┐╤А╨╛╨╡╨║╤В╨░ WORLD_OLLAMA"

                        - "╨Я╤А╨╕╨╜╤Ж╨╕╨┐╤Л ╨в╨а╨Ш╨Ч ╨┤╨╗╤П ╤А╨╡╤И╨╡╨╜╨╕╤П ╤В╨╡╤Е╨╜╨╕╤З╨╡╤Б╨║╨╕╤Е ╨┐╤А╨╛╤В╨╕╨▓╨╛╤А╨╡╤З╨╕╨╣"

                        - "╨б╤А╨░╨▓╨╜╨╡╨╜╨╕╨╡ LangGraph ╨╕ CrewAI"

            

            mode (str, optional): ╨а╨╡╨╢╨╕╨╝ ╨┐╨╛╨╕╤Б╨║╨░ ╨▓ ╨│╤А╨░╤Д╨╡ ╨╖╨╜╨░╨╜╨╕╨╣:

                - "hybrid" (╤А╨╡╨║╨╛╨╝╨╡╨╜╨┤╤Г╨╡╤В╤Б╤П) - ╨║╨╛╨╝╨▒╨╕╨╜╨╕╤А╨╛╨▓╨░╨╜╨╜╤Л╨╣ ╨┐╨╛╨╕╤Б╨║ (30-60s)

                - "local" - ╨╗╨╛╨║╨░╨╗╤М╨╜╤Л╨╣ entity-based ╨┐╨╛╨╕╤Б╨║ (20-30s)

                - "global" - ╨│╨╗╨╛╨▒╨░╨╗╤М╨╜╤Л╨╣ ╨│╤А╨░╤Д-╨┐╨╛╨╕╤Б╨║ (30-45s)

                - "naive" - ╨┐╤А╤П╨╝╨╛╨╣ ╨▓╨╡╨║╤В╨╛╤А╨╜╤Л╨╣ ╨┐╨╛╨╕╤Б╨║ (10-20s, ╨╝╨╡╨╜╨╡╨╡ ╤В╨╛╤З╨╜╨╛)

        

        Returns:

            str: ╨в╨╡╨║╤Б╤В╨╛╨▓╤Л╨╣ ╨╛╤В╨▓╨╡╤В ╨╕╨╖ ╨▒╨░╨╖╤Л ╨╖╨╜╨░╨╜╨╕╨╣ (╨╛╨▒╤Л╤З╨╜╨╛ 2000-3000 ╤Б╨╕╨╝╨▓╨╛╨╗╨╛╨▓ 

                 ╨║╨╛╨╜╤В╨╡╨║╤Б╤В╤Г╨░╨╗╤М╨╜╨╛╨╣ ╨╕╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╨╕)

        """

        # ╨Т╨░╨╗╨╕╨┤╨░╤Ж╨╕╤П ╨▓╤Е╨╛╨┤╨╜╤Л╤Е ╨┤╨░╨╜╨╜╤Л╤Е

        if not query or not query.strip():

            return "тЭМ ╨Ю╤И╨╕╨▒╨║╨░: Query ╨╜╨╡ ╨╝╨╛╨╢╨╡╤В ╨▒╤Л╤В╤М ╨┐╤Г╤Б╤В╤Л╨╝. ╨г╨║╨░╨╢╨╕╤В╨╡ ╨║╨╛╨╜╨║╤А╨╡╤В╨╜╤Л╨╣ ╨▓╨╛╨┐╤А╨╛╤Б."

        

        # ╨г╤Б╤В╨░╨╜╨╛╨▓╨║╨░ ╤А╨╡╨╢╨╕╨╝╨░ ╨┐╨╛ ╤Г╨╝╨╛╨╗╤З╨░╨╜╨╕╤О

        if mode is None:

            mode = self.valves.DEFAULT_MODE

        

        # ╨Т╨░╨╗╨╕╨┤╨░╤Ж╨╕╤П ╤А╨╡╨╢╨╕╨╝╨░

        valid_modes = ["naive", "local", "global", "hybrid"]

        if mode not in valid_modes:

            return (

                f"тЭМ ╨Ю╤И╨╕╨▒╨║╨░: ╨Э╨╡╨║╨╛╤А╤А╨╡╨║╤В╨╜╤Л╨╣ ╤А╨╡╨╢╨╕╨╝ '{mode}'. "

                f"╨Ф╨╛╨┐╤Г╤Б╤В╨╕╨╝╤Л╨╡ ╨╖╨╜╨░╤З╨╡╨╜╨╕╤П: {', '.join(valid_modes)}"

            )

        

        # ╨Я╤А╨╛╨▓╨╡╤А╨║╨░ ╨╖╨┤╨╛╤А╨╛╨▓╤М╤П CORTEX (╨╛╨┐╤Ж╨╕╨╛╨╜╨░╨╗╤М╨╜╨╛, ╨╝╨╛╨╢╨╜╨╛ ╨╖╨░╨║╨╛╨╝╨╝╨╡╨╜╤В╨╕╤А╨╛╨▓╨░╤В╤М ╨┤╨╗╤П ╤Б╨║╨╛╤А╨╛╤Б╤В╨╕)

        if not self._check_cortex_health():

            return (

                "тЭМ CORTEX (LightRAG) ╨╜╨╡╨┤╨╛╤Б╤В╤Г╨┐╨╡╨╜ ╨╜╨░ "

                f"{self.valves.CORTEX_BASE_URL}.\n\n"

                "╨Ч╨░╨┐╤Г╤Б╤В╨╕╤В╨╡ ╤Б╨╡╤А╨▓╨╡╤А ╨║╨╛╨╝╨░╨╜╨┤╨╛╨╣:\n"

                "pwsh E:\\WORLD_OLLAMA\\scripts\\start_lightrag.ps1\n\n"

                "╨Ш╨╗╨╕ ╨┐╤А╨╛╨▓╨╡╤А╤М╤В╨╡ ╤Б╤В╨░╤В╤Г╤Б: Invoke-RestMethod "

                f"{self.valves.CORTEX_BASE_URL}/health"

            )

        

        # ╨Я╨╛╨┤╨│╨╛╤В╨╛╨▓╨║╨░ ╨╖╨░╨┐╤А╨╛╤Б╨░ ╨║ CORTEX

        payload = {

            "query": query.strip(),

            "mode": mode

        }

        

        try:

            # ╨Т╤Л╨┐╨╛╨╗╨╜╨╡╨╜╨╕╨╡ POST ╨╖╨░╨┐╤А╨╛╤Б╨░

            response = requests.post(

                f"{self.valves.CORTEX_BASE_URL}/query",

                json=payload,

                timeout=self.valves.DEFAULT_TIMEOUT

            )

            

            # ╨Я╤А╨╛╨▓╨╡╤А╨║╨░ ╤Б╤В╨░╤В╤Г╤Б╨░

            response.raise_for_status()

            

            # ╨Я╨░╤А╤Б╨╕╨╜╨│ ╨╛╤В╨▓╨╡╤В╨░

            result = response.json()

            answer = result.get("response", "")

            

            if not answer or answer == "╨Ш╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╤П ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜╨░ ╨▓ ╨▒╨░╨╖╨╡ ╨╖╨╜╨░╨╜╨╕╨╣.":

                return (

                    f"тЪая╕П ╨Ш╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╤П ╨┐╨╛ ╨╖╨░╨┐╤А╨╛╤Б╤Г '{query[:50]}...' "

                    "╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜╨░ ╨▓ ╨▒╨░╨╖╨╡ ╨╖╨╜╨░╨╜╨╕╨╣ CORTEX.\n\n"

                    "╨Я╨╛╨┐╤А╨╛╨▒╤Г╨╣╤В╨╡:\n"

                    "тАв ╨Я╨╡╤А╨╡╤Д╨╛╤А╨╝╤Г╨╗╨╕╤А╨╛╨▓╨░╤В╤М ╨╖╨░╨┐╤А╨╛╤Б ╨▒╨╛╨╗╨╡╨╡ ╨╛╨▒╤Й╨╕╨╝╨╕ ╤В╨╡╤А╨╝╨╕╨╜╨░╨╝╨╕\n"

                    "тАв ╨Ш╤Б╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╤М ╨┤╤А╤Г╨│╨╛╨╣ ╤А╨╡╨╢╨╕╨╝ ╨┐╨╛╨╕╤Б╨║╨░ (mode='global' ╨╕╨╗╨╕ 'hybrid')\n"

                    "тАв ╨Я╤А╨╛╨▓╨╡╤А╨╕╤В╤М, ╨╛╤В╨╜╨╛╤Б╨╕╤В╤Б╤П ╨╗╨╕ ╨▓╨╛╨┐╤А╨╛╤Б ╨║ ╤В╨╡╨╝╨░╨╝ ╨▒╨░╨╖╤Л ╨╖╨╜╨░╨╜╨╕╨╣\n\n"

                    f"╨С╨░╨╖╨░ ╨╖╨╜╨░╨╜╨╕╨╣ ╨┐╨╛╨║╤А╤Л╨▓╨░╨╡╤В: GPU overclocking, SSL, AI agents, "

                    f"╨в╨а╨Ш╨Ч, LightRAG, Project docs (331/336 ╨┤╨╛╨║╤Г╨╝╨╡╨╜╤В╨╛╨▓, 98.5%)"

                )

            

            # ╨Ь╨╡╤В╨░╨┤╨░╨╜╨╜╤Л╨╡ ╨┤╨╗╤П ╨╕╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╨╕ (╨╛╨┐╤Ж╨╕╨╛╨╜╨░╨╗╤М╨╜╨╛)

            detected_lang = result.get("detected_language", "unknown")

            tried_modes = result.get("tried_modes", [mode])

            

            # ╨д╨╛╤А╨╝╨╕╤А╨╛╨▓╨░╨╜╨╕╨╡ ╨╛╤В╨▓╨╡╤В╨░ ╤Б ╨╝╨╡╤В╨░╨┤╨░╨╜╨╜╤Л╨╝╨╕

            response_text = (

                f"ЁЯУЪ **╨Ш╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╤П ╨╕╨╖ ╨▒╨░╨╖╤Л ╨╖╨╜╨░╨╜╨╕╨╣ CORTEX:**\n\n"

                f"{answer}\n\n"

                f"---\n"

                f"*╨Ш╤Б╤В╨╛╤З╨╜╨╕╨║: CORTEX (LightRAG) | "

                f"╨а╨╡╨╢╨╕╨╝: {', '.join(tried_modes)} | "

                f"╨п╨╖╤Л╨║: {detected_lang} | "

                f"╨Ф╨╗╨╕╨╜╨░: {len(answer)} ╤Б╨╕╨╝╨▓╨╛╨╗╨╛╨▓*"

            )

            

            return response_text

        

        except requests.exceptions.Timeout:

            return (

                f"тП▒я╕П ╨в╨░╨╣╨╝╨░╤Г╤В: CORTEX ╨╜╨╡ ╤Г╤Б╨┐╨╡╨╗ ╨╛╨▒╤А╨░╨▒╨╛╤В╨░╤В╤М ╨╖╨░╨┐╤А╨╛╤Б ╨╖╨░ "

                f"{self.valves.DEFAULT_TIMEOUT}s.\n\n"

                "LightRAG ╨╝╨╛╨╢╨╡╤В ╨┤╨╛╨╗╨│╨╛ ╨│╨╡╨╜╨╡╤А╨╕╤А╨╛╨▓╨░╤В╤М ╨╛╤В╨▓╨╡╤В╤Л (30-90s) ╨┤╨╗╤П ╤Б╨╗╨╛╨╢╨╜╤Л╤Е ╨╖╨░╨┐╤А╨╛╤Б╨╛╨▓.\n\n"

                "╨Т╨╛╨╖╨╝╨╛╨╢╨╜╤Л╨╡ ╤А╨╡╤И╨╡╨╜╨╕╤П:\n"

                "тАв ╨г╨▓╨╡╨╗╨╕╤З╤М╤В╨╡ DEFAULT_TIMEOUT ╨▓ ╨╜╨░╤Б╤В╤А╨╛╨╣╨║╨░╤Е ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В╨░ (Valves)\n"

                "тАв ╨Ш╤Б╨┐╨╛╨╗╤М╨╖╤Г╨╣╤В╨╡ ╨▒╨╛╨╗╨╡╨╡ ╨▒╤Л╤Б╤В╤А╤Л╨╣ ╤А╨╡╨╢╨╕╨╝: mode='naive' (10-20s)\n"

                "тАв ╨г╨┐╤А╨╛╤Б╤В╨╕╤В╨╡ ╨╖╨░╨┐╤А╨╛╤Б"

            )

        

        except requests.exceptions.ConnectionError:

            return (

                f"тЭМ ╨Э╨╡ ╤Г╨┤╨░╨╗╨╛╤Б╤М ╨┐╨╛╨┤╨║╨╗╤О╤З╨╕╤В╤М╤Б╤П ╨║ CORTEX ╨╜╨░ "

                f"{self.valves.CORTEX_BASE_URL}.\n\n"

                "╨г╨▒╨╡╨┤╨╕╤В╨╡╤Б╤М, ╤З╤В╨╛ ╤Б╨╡╤А╨▓╨╡╤А ╨╖╨░╨┐╤Г╤Й╨╡╨╜:\n"

                "pwsh E:\\WORLD_OLLAMA\\scripts\\start_lightrag.ps1\n\n"

                "╨Я╤А╨╛╨▓╨╡╤А╤М╤В╨╡ ╨┐╨╛╤А╤В: netstat -ano | Select-String ':8004'"

            )

        

        except requests.exceptions.HTTPError as e:

            status_code = e.response.status_code

            error_detail = e.response.text[:200] if e.response.text else "No details"

            return (

                f"тЭМ CORTEX ╨▓╨╡╤А╨╜╤Г╨╗ ╨╛╤И╨╕╨▒╨║╤Г HTTP {status_code}:\n\n"

                f"{error_detail}\n\n"

                "╨Я╤А╨╛╨▓╨╡╤А╤М╤В╨╡ ╨╗╨╛╨│╨╕ ╤Б╨╡╤А╨▓╨╡╤А╨░: "

                "E:\\WORLD_OLLAMA\\services\\lightrag\\lightrag_server.log"

            )

        

        except Exception as e:

            return (

                f"тЭМ ╨Э╨╡╨╛╨╢╨╕╨┤╨░╨╜╨╜╨░╤П ╨╛╤И╨╕╨▒╨║╨░ ╨┐╤А╨╕ ╨╖╨░╨┐╤А╨╛╤Б╨╡ ╨║ CORTEX:\n\n"

                f"{str(e)}\n\n"

                "╨в╨╕╨┐ ╨╛╤И╨╕╨▒╨║╨╕: {type(e).__name__}"

            )

    

    # ╨Р╨╗╨╕╨░╤Б ╨┤╨╗╤П ╤Б╨╛╨▓╨╝╨╡╤Б╤В╨╕╨╝╨╛╤Б╤В╨╕ ╤Б ╤А╨░╨╖╨╗╨╕╤З╨╜╤Л╨╝╨╕ ╨╕╨╝╨╡╨╜╨╛╨▓╨░╨╜╨╕╤П╨╝╨╕

    action_search_knowledge = action_lookup_knowledge

    action_query_cortex = action_lookup_knowledge





# ============================================================================

# ╨Ш╨Э╨б╨в╨а╨г╨Ъ╨ж╨Ш╨п ╨Я╨Ю ╨Ш╨б╨Я╨Ю╨Ы╨м╨Ч╨Ю╨Т╨Р╨Э╨Ш╨о ╨Т OPEN WEBUI

# ============================================================================

#

# 1. ╨г╨б╨в╨Р╨Э╨Ю╨Т╨Ъ╨Р ╨Ш╨Э╨б╨в╨а╨г╨Ь╨Х╨Э╨в╨Р:

#    - ╨Ю╤В╨║╤А╨╛╨╣╤В╨╡ http://localhost:3100

#    - Workspace тЖТ Tools тЖТ "+ Add Tool"

#    - ╨б╨║╨╛╨┐╨╕╤А╤Г╨╣╤В╨╡ ╨Т╨б╨Б ╤Б╨╛╨┤╨╡╤А╨╢╨╕╨╝╨╛╨╡ ╤Н╤В╨╛╨│╨╛ ╤Д╨░╨╣╨╗╨░

#    - Name: "Knowledge Base" (╨╕╨╗╨╕ "CORTEX Lookup")

#    - Description: "Access to WORLD_OLLAMA knowledge base (331 docs)"

#    - ╨б╨╛╤Е╤А╨░╨╜╨╕╤В╨╡

#

# 2. ╨Э╨Р╨б╨в╨а╨Ю╨Щ╨Ъ╨Р VALVES (╨╛╨┐╤Ж╨╕╨╛╨╜╨░╨╗╤М╨╜╨╛):

#    - ╨Э╨░╨╢╨╝╨╕╤В╨╡ ╨╜╨░ ╨╕╨║╨╛╨╜╨║╤Г ╨╜╨░╤Б╤В╤А╨╛╨╡╨║ ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В╨░

#    - ╨Ш╨╖╨╝╨╡╨╜╨╕╤В╨╡ ╨┐╨░╤А╨░╨╝╨╡╤В╤А╤Л:

#      * CORTEX_BASE_URL: http://localhost:8004 (╨┐╨╛ ╤Г╨╝╨╛╨╗╤З╨░╨╜╨╕╤О)

#      * DEFAULT_TIMEOUT: 120 (╤Б╨╡╨║╤Г╨╜╨┤╤Л)

#      * DEFAULT_MODE: hybrid (╤А╨╡╨║╨╛╨╝╨╡╨╜╨┤╤Г╨╡╤В╤Б╤П)

#

# 3. ╨Р╨Ъ╨в╨Ш╨Т╨Р╨ж╨Ш╨п ╨Ф╨Ы╨п ╨Ь╨Ю╨Ф╨Х╨Ы╨Ш:

#    - ╨Я╨╡╤А╨╡╨╣╨┤╨╕╤В╨╡ ╨▓ ╨╜╨░╤Б╤В╤А╨╛╨╣╨║╨╕ ╨╝╨╛╨┤╨╡╨╗╨╕ qwen2-main

#    - Models тЖТ qwen2-main тЖТ Edit

#    - ╨Т╨║╨╗╤О╤З╨╕╤В╨╡ ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В "Knowledge Base" ╨▓ ╤А╨░╨╖╨┤╨╡╨╗╨╡ Tools

#    - ╨б╨╛╤Е╤А╨░╨╜╨╕╤В╨╡

#

# 4. ╨Ш╨б╨Я╨Ю╨Ы╨м╨Ч╨Ю╨Т╨Р╨Э╨Ш╨Х ╨Т ╨з╨Р╨в╨Х:

#    User: ╨а╨░╤Б╤Б╨║╨░╨╢╨╕ ╨┐╤А╨╛ ╤Б╤В╤А╤Г╨║╤В╤Г╤А╤Г WORLD_OLLAMA

#    

#    Assistant: [╨░╨▓╤В╨╛╨╝╨░╤В╨╕╤З╨╡╤Б╨║╨╕ ╨▓╤Л╨╖╤Л╨▓╨░╨╡╤В action_lookup_knowledge]

#    ЁЯУЪ ╨Ш╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╤П ╨╕╨╖ ╨▒╨░╨╖╤Л ╨╖╨╜╨░╨╜╨╕╨╣ CORTEX:

#    [2000-3000 ╤Б╨╕╨╝╨▓╨╛╨╗╨╛╨▓ ╨║╨╛╨╜╤В╨╡╨║╤Б╤В╨░]

#    

#    Assistant: ╨Э╨░ ╨╛╤Б╨╜╨╛╨▓╨╡ ╨┐╨╛╨╗╤Г╤З╨╡╨╜╨╜╨╛╨╣ ╨╕╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╨╕, ╤Б╤В╤А╤Г╨║╤В╤Г╤А╨░ WORLD_OLLAMA...

#

# 5. ╨Я╨а╨Ю╨Т╨Х╨а╨Ъ╨Р ╨а╨Р╨С╨Ю╨в╨л:

#    - ╨Ю╤В╨║╤А╨╛╨╣╤В╨╡ ╤З╨░╤В ╤Б ╨╝╨╛╨┤╨╡╨╗╤М╤О qwen2-main

#    - ╨Ч╨░╨┤╨░╨╣╤В╨╡ ╨▓╨╛╨┐╤А╨╛╤Б: "╨з╤В╨╛ ╤В╨░╨║╨╛╨╡ WORLD_OLLAMA?"

#    - ╨Х╤Б╨╗╨╕ ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В ╤А╨░╨▒╨╛╤В╨░╨╡╤В, ╤Г╨▓╨╕╨┤╨╕╤В╨╡ ╤Б╨╛╨╛╨▒╤Й╨╡╨╜╨╕╨╡ "ЁЯУЪ ╨Ш╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╤П ╨╕╨╖ ╨▒╨░╨╖╤Л ╨╖╨╜╨░╨╜╨╕╨╣"

#    - ╨Х╤Б╨╗╨╕ ╨╛╤И╨╕╨▒╨║╨░, ╨┐╤А╨╛╨▓╨╡╤А╤М╤В╨╡:

#      a) CORTEX ╨╖╨░╨┐╤Г╤Й╨╡╨╜: Invoke-RestMethod http://localhost:8004/health

#      b) ╨Ш╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В ╨░╨║╤В╨╕╨▓╨╕╤А╨╛╨▓╨░╨╜ ╨▓ ╨╜╨░╤Б╤В╤А╨╛╨╣╨║╨░╤Е ╨╝╨╛╨┤╨╡╨╗╨╕

#      c) ╨Ы╨╛╨│╨╕ Open WebUI: docker logs open-webui (╨╡╤Б╨╗╨╕ ╨▓ Docker)

#

# 6. TROUBLESHOOTING:

#    - "CORTEX ╨╜╨╡╨┤╨╛╤Б╤В╤Г╨┐╨╡╨╜" тЖТ ╨Ч╨░╨┐╤Г╤Б╤В╨╕╤В╨╡: pwsh scripts/start_lightrag.ps1

#    - "╨в╨░╨╣╨╝╨░╤Г╤В" тЖТ ╨г╨▓╨╡╨╗╨╕╤З╤М╤В╨╡ DEFAULT_TIMEOUT ╨▓ Valves ╨┤╨╛ 180

#    - "╨Ш╨╜╤Д╨╛╤А╨╝╨░╤Ж╨╕╤П ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜╨░" тЖТ ╨Я╨╛╨┐╤А╨╛╨▒╤Г╨╣╤В╨╡ mode='global' ╨╕╨╗╨╕ 'hybrid'

#    - ╨Ь╨╛╨┤╨╡╨╗╤М ╨╜╨╡ ╨▓╤Л╨╖╤Л╨▓╨░╨╡╤В ╨╕╨╜╤Б╤В╤А╤Г╨╝╨╡╨╜╤В тЖТ ╨Я╤А╨╛╨▓╨╡╤А╤М╤В╨╡ ╨░╨║╤В╨╕╨▓╨░╤Ж╨╕╤О ╨▓ ╨╜╨░╤Б╤В╤А╨╛╨╣╨║╨░╤Е ╨╝╨╛╨┤╨╡╨╗╨╕

#

# ============================================================================

# ╨Я╨а╨Ш╨Ь╨Х╨а╨л ╨Ч╨Р╨Я╨а╨Ю╨б╨Ю╨Т ╨Ф╨Ы╨п ╨в╨Х╨б╨в╨Ш╨а╨Ю╨Т╨Р╨Э╨Ш╨п

# ============================================================================

#

# ╨в╨╡╤Б╤В 1 (╨б╤В╤А╤Г╨║╤В╤Г╤А╨░ ╨┐╤А╨╛╨╡╨║╤В╨░):

#   "╨Ъ╨░╨║╨╛╨▓╨░ ╤Д╨░╨╣╨╗╨╛╨▓╨░╤П ╤Б╤В╤А╤Г╨║╤В╤Г╤А╨░ ╨┐╤А╨╛╨╡╨║╤В╨░ WORLD_OLLAMA?"

#   ╨Ю╨╢╨╕╨┤╨░╨╡╤В╤Б╤П: ╨Ю╨┐╨╕╤Б╨░╨╜╨╕╨╡ ╨┤╨╕╤А╨╡╨║╤В╨╛╤А╨╕╨╣ services/, scripts/, workbench/, ...

#

# ╨в╨╡╤Б╤В 2 (╨в╨╡╤Е╨╜╨╕╤З╨╡╤Б╨║╨╕╨╣ ╨▓╨╛╨┐╤А╨╛╤Б):

#   "╨Ъ╨░╨║ ╨▒╨╡╨╖╨╛╨┐╨░╤Б╨╜╨╛ ╤А╨░╨╖╨╛╨│╨╜╨░╤В╤М ╨┐╨░╨╝╤П╤В╤М RTX 5060 Ti ╤З╨╡╤А╨╡╨╖ MSI Afterburner?"

#   ╨Ю╨╢╨╕╨┤╨░╨╡╤В╤Б╤П: ╨Ш╨╜╤Б╤В╤А╤Г╨║╤Ж╨╕╨╕ ╨┐╨╛ ╨╜╨░╤Б╤В╤А╨╛╨╣╨║╨╡ Memory Clock, VRAM monitoring

#

# ╨в╨╡╤Б╤В 3 (╨Ъ╨╛╨╜╤Ж╨╡╨┐╤В╤Г╨░╨╗╤М╨╜╤Л╨╣):

#   "╨Т ╤З╨╡╨╝ ╤А╨░╨╖╨╜╨╕╤Ж╨░ ╨╝╨╡╨╢╨┤╤Г LangGraph ╨╕ CrewAI ╨┤╨╗╤П AI ╨░╨│╨╡╨╜╤В╨╛╨▓?"

#   ╨Ю╨╢╨╕╨┤╨░╨╡╤В╤Б╤П: ╨б╤А╨░╨▓╨╜╨╡╨╜╨╕╨╡ ╨░╤А╤Е╨╕╤В╨╡╨║╤В╤Г╤А, use cases, ╨┐╤А╨╡╨╕╨╝╤Г╤Й╨╡╤Б╤В╨▓

#

# ╨в╨╡╤Б╤В 4 (╨в╨а╨Ш╨Ч):

#   "╨Ъ╨░╨║╨╕╨╡ ╨┐╤А╨╕╨╜╤Ж╨╕╨┐╤Л ╨в╨а╨Ш╨Ч ╨╝╨╛╨╢╨╜╨╛ ╨╕╤Б╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╤М ╨┤╨╗╤П ╤А╨╡╤И╨╡╨╜╨╕╤П ╤В╨╡╤Е╨╜╨╕╤З╨╡╤Б╨║╨╕╤Е ╨┐╤А╨╛╤В╨╕╨▓╨╛╤А╨╡╤З╨╕╨╣?"

#   ╨Ю╨╢╨╕╨┤╨░╨╡╤В╤Б╤П: ╨Ю╨┐╨╕╤Б╨░╨╜╨╕╨╡ ╨┐╤А╨╕╨╜╤Ж╨╕╨┐╨╛╨▓ ╤Б ╨┐╤А╨╕╨╝╨╡╤А╨░╨╝╨╕ ╨┐╤А╨╕╨╝╨╡╨╜╨╡╨╜╨╕╤П

#

# ============================================================================


